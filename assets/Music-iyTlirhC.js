import{u as j}from"./useRealVh-CRoPDMX5.js";import{m as B,_ as x,r as m,p as y,o as z,c as d,a as c,b as s,g as h,u as i,F as f,h as b,q as p,n as k,t as r,j as D,v as I,w as N,l as P}from"./index-DYaDPK3h.js";const L=B("music",{state:()=>({list:[{title:"在加纳共和国离婚",artist:"菲道尔,DIOR大颖",src:"/music/在加纳共和国离婚.mp3",poster:"/music/在加纳共和国离婚.jpg"},{title:"雨爱",artist:"杨丞琳",src:"/music/雨爱.mp3",poster:"/music/雨爱.jpg"},{title:"一路向北",artist:"周杰伦",src:"/music/一路向北.mp3",poster:"/music/一路向北.jpg"},{title:"偏向",artist:"陈子晴",src:"/music/偏向.mp3",poster:"/music/偏向.jpg"},{title:"租购",artist:"薛之谦",src:"/music/租购.mp3",poster:"/music/租购.jpg"}],index:0,playing:!1,volume:.7,currentTime:0,duration:0}),getters:{current:u=>u.list[u.index]},actions:{play(){this.playing=!0},pause(){this.playing=!1},toggle(){this.playing?this.pause():this.play()},next(){this.index=(this.index+1)%this.list.length},prev(){this.index=(this.index-1+this.list.length)%this.list.length},seek(u){const t=document.querySelector("audio");t&&(t.currentTime=u*t.duration)}}}),R={class:"music-player"},q={class:"background-decoration"},E={key:0,class:"audio-visualizer"},F={class:"main-layout"},U={class:"player-area"},O={class:"album-section"},X={class:"album-cover"},A=["src"],G={class:"control-area"},H={class:"song-progress-section"},J={class:"song-info"},K={class:"song-title"},Q={class:"song-artist"},W={class:"progress-section"},Y={class:"time-info"},Z={class:"current-time"},ss={class:"total-time"},ts={class:"controls-section"},es={class:"main-controls"},is=["name"],os={class:"volume-section"},ns=["name"],ls={class:"volume-slider"},as={class:"playlist-area"},rs={class:"playlist-card"},cs={class:"playlist-header"},us={class:"playlist-stats"},ds={class:"playlist-content"},vs=["onClick"],ms={class:"item-index"},ps={class:"song-cover"},_s=["src","alt"],gs={key:0,class:"play-indicator"},ys={class:"song-details"},hs={class:"song-name"},fs={class:"song-artist"},bs={class:"song-actions"},ks=["onClick"],xs=["name"],Ts=["src","volume"],ws={__name:"MusicPlayer",setup(u){const t=L(),n=m(null),v=m(0),T=m(!1);function _(l){if(!l||isNaN(l))return"0:00";const e=Math.floor(l/60),o=Math.floor(l%60).toString().padStart(2,"0");return`${e}:${o}`}function w(){t.currentTime=n.value.currentTime,v.value=n.value.currentTime/n.value.duration*100||0}function C(){t.duration=n.value.duration}function M(l){const e=l.currentTarget.getBoundingClientRect(),a=(l.clientX-e.left)/e.width;n.value.currentTime=a*n.value.duration}function g(l){t.index=l,t.play(),T.value=!1}function $(){t.volume>0?(t.lastVol=t.volume,t.volume=0):t.volume=t.lastVol||.7}function S(){return t.volume===0?"volume-mute":t.volume<.3?"volume-low":t.volume<.7?"volume-medium":"volume-high"}return y(()=>t.playing,l=>{l?n.value.play().catch(console.error):n.value.pause()}),y(()=>t.index,()=>{n.value.load(),t.playing&&setTimeout(()=>{n.value.play().catch(console.error)},100)}),z(()=>{n.value.load()}),(l,e)=>(c(),d("div",R,[s("div",q,[e[5]||(e[5]=s("div",{class:"gradient-orb orb-1"},null,-1)),e[6]||(e[6]=s("div",{class:"gradient-orb orb-2"},null,-1)),e[7]||(e[7]=s("div",{class:"gradient-orb orb-3"},null,-1)),i(t).playing?(c(),d("div",E,[(c(),d(f,null,b(120,o=>s("div",{class:"visualizer-bar",key:o,style:p({animationDelay:o*.05+"s"})},null,4)),64))])):h("",!0)]),s("div",F,[s("div",U,[s("div",O,[s("div",{class:k(["album-container",{spinning:i(t).playing}])},[s("div",X,[s("img",{src:i(t).current.poster,alt:"专辑封面"},null,8,A),e[8]||(e[8]=s("div",{class:"vinyl-center"},null,-1))])],2)]),s("div",G,[s("div",H,[s("div",J,[s("h2",K,r(i(t).current.title),1),s("p",Q,r(i(t).current.artist),1)]),s("div",W,[s("div",Y,[s("span",Z,r(_(i(t).currentTime)),1),s("span",ss,r(_(i(t).duration)),1)]),s("div",{class:"progress-container",onClick:M},[e[9]||(e[9]=s("div",{class:"progress-track"},null,-1)),s("div",{class:"progress-bar",style:p({width:v.value+"%"})},null,4),s("div",{class:"progress-thumb",style:p({left:v.value+"%"})},null,4)])])]),s("div",ts,[s("div",es,[s("button",{class:"control-btn",onClick:e[0]||(e[0]=o=>i(t).prev())},[...e[10]||(e[10]=[s("ion-icon",{name:"play-skip-back"},null,-1)])]),s("button",{class:"play-btn",onClick:e[1]||(e[1]=o=>i(t).toggle())},[s("ion-icon",{name:i(t).playing?"pause":"play"},null,8,is)]),s("button",{class:"control-btn",onClick:e[2]||(e[2]=o=>i(t).next())},[...e[11]||(e[11]=[s("ion-icon",{name:"play-skip-forward"},null,-1)])])]),s("div",os,[s("button",{class:"volume-btn",onClick:$},[s("ion-icon",{name:S()},null,8,ns)]),s("div",ls,[D(s("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":e[3]||(e[3]=o=>i(t).volume=o),class:"volume-input"},null,512),[[I,i(t).volume,void 0,{number:!0}]])])])])])]),s("div",as,[s("div",rs,[s("div",cs,[e[12]||(e[12]=s("h3",null,"播放列表",-1)),s("div",us,r(i(t).list.length)+" 首歌曲",1)]),s("div",ds,[(c(!0),d(f,null,b(i(t).list,(o,a)=>(c(),d("div",{key:a,class:k(["playlist-item",{active:a===i(t).index,playing:a===i(t).index&&i(t).playing}]),onClick:V=>g(a)},[s("div",ms,r(a+1),1),s("div",ps,[s("img",{src:o.poster,alt:o.title},null,8,_s),a===i(t).index&&i(t).playing?(c(),d("div",gs,[...e[13]||(e[13]=[s("div",{class:"wave-bar"},null,-1),s("div",{class:"wave-bar"},null,-1),s("div",{class:"wave-bar"},null,-1)])])):h("",!0)]),s("div",ys,[s("div",hs,r(o.title),1),s("div",fs,r(o.artist),1)]),s("div",bs,[s("button",{class:"action-btn",onClick:N(V=>g(a),["stop"])},[s("ion-icon",{name:a===i(t).index&&i(t).playing?"pause":"play"},null,8,xs)],8,ks)])],10,vs))),128))])])])]),s("audio",{ref_key:"audio",ref:n,src:i(t).current.src,volume:i(t).volume,onEnded:e[4]||(e[4]=o=>i(t).next()),onTimeupdate:w,onLoadedmetadata:C},null,40,Ts)]))}},Cs=x(ws,[["__scopeId","data-v-05d448c1"]]),Ms={__name:"Music",setup(u){return j(),(t,n)=>(c(),P(Cs))}},Vs=x(Ms,[["__scopeId","data-v-180107b3"]]);export{Vs as default};
