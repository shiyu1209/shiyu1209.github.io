import{_ as E,r as h,e as d,c as l,a as c,b as e,k as p,t as o,F as y,h as b,g,d as F,s as I,T as L,n as _,w as R}from"./index-DYaDPK3h.js";import{u as S}from"./useRealVh-CRoPDMX5.js";const z={class:"notice-container"},G={class:"notice-header"},U={class:"header-actions"},j=["disabled"],q={class:"notice-stats"},H={class:"stat-item"},J={class:"stat-number"},K={class:"stat-item"},O={class:"stat-number unread"},P={class:"notice-filters"},Q=["onClick"],W=["name"],X={key:0,class:"filter-count"},Y={class:"notice-list"},Z={key:0,class:"empty-state"},ee=["onClick"],te={class:"notice-icon"},se=["name"],ne={class:"notice-content"},ae={class:"notice-header-info"},oe={class:"notice-title"},ie={class:"notice-time"},le={class:"notice-message"},ce={class:"notice-meta"},re={key:0,class:"unread-dot"},de={class:"notice-actions"},ue=["onClick"],me={__name:"Notice",setup(pe){S();const a=h([{id:1,type:"system",title:"系统更新",message:"系统已更新到最新版本 v2.1.0，新增了多项功能和性能优化。",time:new Date(Date.now()-1e3*60*30),read:!1},{id:2,type:"message",title:"新消息",message:"您有一条来自管理员的重要消息，请及时查看。",time:new Date(Date.now()-1e3*60*60*2),read:!1},{id:3,type:"update",title:"功能更新",message:"音乐播放器新增了歌词显示功能，快去体验吧！",time:new Date(Date.now()-1e3*60*60*24),read:!0},{id:4,type:"warning",title:"安全提醒",message:"检测到异常登录行为，请确认是否为本人操作。",time:new Date(Date.now()-1e3*60*60*24*2),read:!0}]),r=h("all"),k=d(()=>[{key:"all",label:"全部",icon:"list-outline",count:a.value.length},{key:"unread",label:"未读",icon:"mail-unread-outline",count:v.value},{key:"system",label:"系统",icon:"settings-outline",count:a.value.filter(t=>t.type==="system").length},{key:"message",label:"消息",icon:"chatbubble-outline",count:a.value.filter(t=>t.type==="message").length},{key:"update",label:"更新",icon:"refresh-outline",count:a.value.filter(t=>t.type==="update").length},{key:"warning",label:"警告",icon:"warning-outline",count:a.value.filter(t=>t.type==="warning").length}]),w=d(()=>a.value.length),v=d(()=>a.value.filter(t=>!t.read).length),C=d(()=>v.value>0),f=d(()=>r.value==="all"?a.value:r.value==="unread"?a.value.filter(t=>!t.read):a.value.filter(t=>t.type===r.value)),D=t=>{const s=a.value.find(n=>n.id===t);s&&(s.read=!0)},N=()=>{a.value.forEach(t=>t.read=!0)},M=t=>{const s=a.value.findIndex(n=>n.id===t);s>-1&&a.value.splice(s,1)},T=()=>{confirm("确定要清空所有通知吗？")&&a.value.splice(0)},x=()=>{const t=["system","message","update","warning"],s=["测试通知","新功能上线","系统维护","重要提醒"],n=["这是一条测试通知消息。","我们为您带来了全新的功能体验。","系统将在今晚进行例行维护。","请注意查看最新的重要信息。"],i=t[Math.floor(Math.random()*t.length)],u=s[Math.floor(Math.random()*s.length)],m=n[Math.floor(Math.random()*n.length)];a.value.unshift({id:Date.now(),type:i,title:u,message:m,time:new Date,read:!1})},$=t=>({system:"settings-outline",message:"mail-outline",update:"refresh-circle-outline",warning:"warning-outline"})[t]||"notifications-outline",V=t=>({system:"系统",message:"消息",update:"更新",warning:"警告"})[t]||"通知",A=t=>{const n=new Date-t,i=Math.floor(n/(1e3*60)),u=Math.floor(n/(1e3*60*60)),m=Math.floor(n/(1e3*60*60*24));return i<1?"刚刚":i<60?`${i}分钟前`:u<24?`${u}小时前`:m<7?`${m}天前`:t.toLocaleDateString()},B=()=>({all:"还没有任何通知",unread:"所有通知都已读完",system:"暂无系统通知",message:"暂无消息通知",update:"暂无更新通知",warning:"暂无警告通知"})[r.value]||"暂无通知";return(t,s)=>(c(),l("div",z,[e("div",G,[s[2]||(s[2]=e("h1",{class:"page-title"},[e("ion-icon",{name:"notifications-outline"}),p(" 通知中心 ")],-1)),e("div",U,[e("button",{onClick:N,class:"action-btn",disabled:!C.value},[...s[0]||(s[0]=[e("ion-icon",{name:"checkmark-done-outline"},null,-1),p(" 全部已读 ",-1)])],8,j),e("button",{onClick:T,class:"action-btn danger"},[...s[1]||(s[1]=[e("ion-icon",{name:"trash-outline"},null,-1),p(" 清空 ",-1)])])])]),e("div",q,[e("div",H,[e("span",J,o(w.value),1),s[3]||(s[3]=e("span",{class:"stat-label"},"总通知",-1))]),e("div",K,[e("span",O,o(v.value),1),s[4]||(s[4]=e("span",{class:"stat-label"},"未读",-1))])]),e("div",P,[(c(!0),l(y,null,b(k.value,n=>(c(),l("button",{key:n.key,onClick:i=>r.value=n.key,class:_(["filter-btn",{active:r.value===n.key}])},[e("ion-icon",{name:n.icon},null,8,W),p(" "+o(n.label)+" ",1),n.count>0?(c(),l("span",X,o(n.count),1)):g("",!0)],10,Q))),128))]),e("div",Y,[f.value.length===0?(c(),l("div",Z,[s[5]||(s[5]=e("div",{class:"empty-icon"},[e("ion-icon",{name:"notifications-off-outline"})],-1)),s[6]||(s[6]=e("h3",null,"暂无通知",-1)),e("p",null,o(B()),1)])):g("",!0),F(L,{name:"notice",tag:"div",class:"notices-wrapper"},{default:I(()=>[(c(!0),l(y,null,b(f.value,n=>(c(),l("div",{key:n.id,class:_(["notice-item",{unread:!n.read}]),onClick:i=>D(n.id)},[e("div",te,[e("ion-icon",{name:$(n.type)},null,8,se)]),e("div",ne,[e("div",ae,[e("h4",oe,o(n.title),1),e("span",ie,o(A(n.time)),1)]),e("p",le,o(n.message),1),e("div",ce,[e("span",{class:_(["notice-type",n.type])},o(V(n.type)),3),n.read?g("",!0):(c(),l("span",re))])]),e("div",de,[e("button",{onClick:R(i=>M(n.id),["stop"]),class:"delete-btn"},[...s[7]||(s[7]=[e("ion-icon",{name:"close-outline"},null,-1)])],8,ue)])],10,ee))),128))]),_:1})]),e("button",{onClick:x,class:"fab"},[...s[8]||(s[8]=[e("ion-icon",{name:"add-outline"},null,-1)])])]))}},_e=E(me,[["__scopeId","data-v-bbb76b3e"]]);export{_e as default};
